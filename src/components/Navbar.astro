---
const pathname = new URL(Astro.request.url).pathname;
// Normalize path to remove trailing slash if present (except for root)
const currentPath = pathname === '/' ? '/' : pathname.replace(/\/$/, '');
---

<nav class="navbar">
  <div class="nav-container">
    <div class="nav-left">
      <div class="nav-logo">
        <a href="/"><img src="/gamesfored.avif" alt="Games for Learning" height="60" width="200" style="width: auto;" fetchpriority="high" /></a>
      </div>
    </div>
    <div class="nav-right">
      <a 
        href="/" 
        class={`nav-link mobile-only ${currentPath === '/' ? 'active' : ''}`}
        data-text="Home"
      >
        Home
      </a>
      <a 
        href="/our-story" 
        class={`nav-link ${currentPath === '/our-story' ? 'active' : ''}`}
        data-text="Our Story"
      >
        Our Story
      </a>
      <a 
        href="/learning-in-practice" 
        class={`nav-link ${currentPath === '/learning-in-practice' ? 'active' : ''}`}
        data-text="Impact"
      >
        Impact
      </a>
      <a 
        href="/programs-and-games" 
        class={`nav-link ${currentPath === '/programs-and-games' ? 'active' : ''}`}
        data-text="Programs"
      >
        Programs
      </a>
      <a 
        href="/contact" 
        class={`nav-cta ${currentPath === '/contact' ? 'active-cta' : ''}`}
      >
        Let's Talk
      </a>
    </div>
    <div class="hamburger">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
    </div>
  </div>
</nav>



<style>
  /* Local overrides/additions to main.css */
  .nav-right {
    gap: 2rem; /* Replace inline margins */
  }

  .nav-link {
    margin-right: 0; /* Reset inline style if any leaked */
  }

  /* Active state styles */
  .nav-link.active {
    font-weight: 700;
    color: var(--color-2);
  }

  .nav-cta.active-cta {
    background: var(--color-2);
    color: var(--color-white);
    transform: rotate(-2deg);
    border-color: var(--color-2);
  }
</style>